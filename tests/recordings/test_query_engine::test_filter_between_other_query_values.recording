[('Cursor', 'execute', ('select @@version', {}), {}, None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor',
  'fetchone',
  (),
  {},
  ('Microsoft SQL Server 2017 (RTM-CU24) (KB5001228) - 14.0.3391.2 (X64) \n'
   '\tApr 28 2021 10:32:18 \n'
   '\tCopyright (C) 2017 Microsoft Corporation\n'
   '\tDeveloper Edition (64-bit) on Linux (Ubuntu 16.04.7 LTS)',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor', 'execute', ('SELECT schema_name()', {}), {}, None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, ('dbo',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('\n'
   '                  SELECT CASE transaction_isolation_level\n'
   '                    WHEN 0 THEN NULL\n'
   "                    WHEN 1 THEN 'READ UNCOMMITTED'\n"
   "                    WHEN 2 THEN 'READ COMMITTED'\n"
   "                    WHEN 3 THEN 'REPEATABLE READ'\n"
   "                    WHEN 4 THEN 'SERIALIZABLE'\n"
   "                    WHEN 5 THEN 'SNAPSHOT' END AS "
   'TRANSACTION_ISOLATION_LEVEL\n'
   '                    FROM sys.dm_exec_sessions\n'
   '                    where session_id = @@SPID\n'
   '                  ',),
  {},
  None),
 ('Cursor', 'fetchone', (), {}, ('READ COMMITTED',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ("SELECT CAST('test max support' AS NVARCHAR(max))", {}),
  {},
  None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, ('test max support',)),
 ('Cursor', 'close', (), {}, None),
 ('Connection', 'rollback', (), {}, None),
 ('Cursor',
  'execute',
  ('SELECT [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] \n'
   'FROM [INFORMATION_SCHEMA].[TABLES] \n'
   'WHERE [INFORMATION_SCHEMA].[TABLES].[TABLE_TYPE] = CAST(%(table_type_1)s '
   'AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] = '
   'CAST(%(table_name_1)s AS NVARCHAR(max)) AND '
   '[INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA] = CAST(%(table_schema_1)s AS '
   'NVARCHAR(max))',
   {'table_type_1': 'BASE TABLE',
    'table_name_1': 'practice_registrations',
    'table_schema_1': 'dbo'}),
  {},
  None),
 ('Cursor',
  'description',
  (),
  {},
  (('TABLE_NAME', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, None),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('SELECT [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] \n'
   'FROM [INFORMATION_SCHEMA].[TABLES] \n'
   'WHERE [INFORMATION_SCHEMA].[TABLES].[TABLE_TYPE] = CAST(%(table_type_1)s '
   'AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] = '
   'CAST(%(table_name_1)s AS NVARCHAR(max)) AND '
   '[INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA] = CAST(%(table_schema_1)s AS '
   'NVARCHAR(max))',
   {'table_type_1': 'BASE TABLE',
    'table_name_1': 'events',
    'table_schema_1': 'dbo'}),
  {},
  None),
 ('Cursor',
  'description',
  (),
  {},
  (('TABLE_NAME', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, None),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('SELECT [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] \n'
   'FROM [INFORMATION_SCHEMA].[TABLES] \n'
   'WHERE [INFORMATION_SCHEMA].[TABLES].[TABLE_TYPE] = CAST(%(table_type_1)s '
   'AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] = '
   'CAST(%(table_name_1)s AS NVARCHAR(max)) AND '
   '[INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA] = CAST(%(table_schema_1)s AS '
   'NVARCHAR(max))',
   {'table_type_1': 'BASE TABLE',
    'table_name_1': 'pos_tests',
    'table_schema_1': 'dbo'}),
  {},
  None),
 ('Cursor',
  'description',
  (),
  {},
  (('TABLE_NAME', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, None),
 ('Cursor', 'close', (), {}, None),
 ('Connection', 'commit', (), {}, None),
 ('Connection', 'rollback', (), {}, None),
 ('Cursor',
  'execute',
  ('SELECT [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] \n'
   'FROM [INFORMATION_SCHEMA].[TABLES] \n'
   'WHERE [INFORMATION_SCHEMA].[TABLES].[TABLE_TYPE] = CAST(%(table_type_1)s '
   'AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] = '
   'CAST(%(table_name_1)s AS NVARCHAR(max)) AND '
   '[INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA] = CAST(%(table_schema_1)s AS '
   'NVARCHAR(max))',
   {'table_type_1': 'BASE TABLE',
    'table_name_1': 'practice_registrations',
    'table_schema_1': 'dbo'}),
  {},
  None),
 ('Cursor',
  'description',
  (),
  {},
  (('TABLE_NAME', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, None),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('SELECT [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] \n'
   'FROM [INFORMATION_SCHEMA].[TABLES] \n'
   'WHERE [INFORMATION_SCHEMA].[TABLES].[TABLE_TYPE] = CAST(%(table_type_1)s '
   'AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] = '
   'CAST(%(table_name_1)s AS NVARCHAR(max)) AND '
   '[INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA] = CAST(%(table_schema_1)s AS '
   'NVARCHAR(max))',
   {'table_type_1': 'BASE TABLE',
    'table_name_1': 'events',
    'table_schema_1': 'dbo'}),
  {},
  None),
 ('Cursor',
  'description',
  (),
  {},
  (('TABLE_NAME', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, None),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('SELECT [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] \n'
   'FROM [INFORMATION_SCHEMA].[TABLES] \n'
   'WHERE [INFORMATION_SCHEMA].[TABLES].[TABLE_TYPE] = CAST(%(table_type_1)s '
   'AS NVARCHAR(max)) AND [INFORMATION_SCHEMA].[TABLES].[TABLE_NAME] = '
   'CAST(%(table_name_1)s AS NVARCHAR(max)) AND '
   '[INFORMATION_SCHEMA].[TABLES].[TABLE_SCHEMA] = CAST(%(table_schema_1)s AS '
   'NVARCHAR(max))',
   {'table_type_1': 'BASE TABLE',
    'table_name_1': 'pos_tests',
    'table_schema_1': 'dbo'}),
  {},
  None),
 ('Cursor',
  'description',
  (),
  {},
  (('TABLE_NAME', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, None),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('\n'
   'CREATE TABLE practice_registrations (\n'
   '\t[RegistrationId] INTEGER NOT NULL IDENTITY, \n'
   '\t[PatientId] INTEGER NULL, \n'
   '\t[StpId] VARCHAR(max) NULL, \n'
   '\t[StartDate] DATE NULL, \n'
   '\t[EndDate] DATE NULL, \n'
   '\tPRIMARY KEY ([RegistrationId])\n'
   ')\n'
   '\n',
   {}),
  {},
  None),
 ('Cursor', 'description', (), {}, None),
 ('Cursor',
  'execute',
  ('\n'
   'CREATE TABLE events (\n'
   '\t[EventId] INTEGER NOT NULL IDENTITY, \n'
   '\t[PatientId] INTEGER NULL, \n'
   '\t[EventCode] VARCHAR(max) NULL, \n'
   '\t[Date] DATE NULL, \n'
   '\t[ResultValue] FLOAT NULL, \n'
   '\tPRIMARY KEY ([EventId])\n'
   ')\n'
   '\n',
   {}),
  {},
  None),
 ('Cursor', 'description', (), {}, None),
 ('Cursor',
  'execute',
  ('\n'
   'CREATE TABLE pos_tests (\n'
   '\t[Id] INTEGER NOT NULL IDENTITY, \n'
   '\t[PatientId] INTEGER NULL, \n'
   '\t[PositiveResult] BIT NULL, \n'
   '\t[TestDate] DATE NULL, \n'
   '\tPRIMARY KEY ([Id])\n'
   ')\n'
   '\n',
   {}),
  {},
  None),
 ('Cursor', 'description', (), {}, None),
 ('Connection', 'commit', (), {}, None),
 ('Connection', 'rollback', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 1,
    'EventCode': 'Code1',
    'Date': '2021-2-1',
    'ResultValue': 10.1}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(1,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 1,
    'EventCode': 'Code1',
    'Date': '2021-4-12',
    'ResultValue': 10.2}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(2,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 1,
    'EventCode': 'Code1',
    'Date': '2021-3-1',
    'ResultValue': 10.3}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(3,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 2,
    'EventCode': 'Code1',
    'Date': '2021-1-10',
    'ResultValue': 50.1}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(4,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 2,
    'EventCode': 'Code1',
    'Date': '2021-2-1',
    'ResultValue': 50.2}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(5,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 2,
    'EventCode': 'Code1',
    'Date': '2021-5-2',
    'ResultValue': 50.3}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(6,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 3,
    'EventCode': 'Code1',
    'Date': '2021-3-15',
    'ResultValue': 60.1}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(7,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 3,
    'EventCode': 'Code1',
    'Date': '2021-4-1',
    'ResultValue': 60.1}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(8,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO events ([PatientId], [EventCode], [Date], [ResultValue]) '
   'OUTPUT inserted.[EventId] VALUES (%(PatientId)s, %(EventCode)s, %(Date)s, '
   '%(ResultValue)s)',
   {'PatientId': 3,
    'EventCode': 'Code2',
    'Date': '2021-2-1',
    'ResultValue': 60.1}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('EventId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(9,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 1, 'PositiveResult': 1, 'TestDate': '2021-1-1'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(1,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 1, 'PositiveResult': 1, 'TestDate': '2021-2-15'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(2,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 1, 'PositiveResult': 1, 'TestDate': '2021-3-2'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(3,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 2, 'PositiveResult': 1, 'TestDate': '2021-1-21'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(4,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 2, 'PositiveResult': 0, 'TestDate': '2021-2-17'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(5,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 2, 'PositiveResult': 1, 'TestDate': '2021-5-1'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(6,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 3, 'PositiveResult': 1, 'TestDate': '2021-1-10'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(7,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 3, 'PositiveResult': 1, 'TestDate': '2021-2-23'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(8,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO pos_tests ([PatientId], [PositiveResult], [TestDate]) OUTPUT '
   'inserted.[Id] VALUES (%(PatientId)s, %(PositiveResult)s, %(TestDate)s)',
   {'PatientId': 3, 'PositiveResult': 1, 'TestDate': '2021-3-1'}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor', 'description', (), {}, (('Id', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(9,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO practice_registrations ([PatientId], [StpId], [StartDate], '
   '[EndDate]) OUTPUT inserted.[RegistrationId] VALUES (%(PatientId)s, '
   '%(StpId)s, %(StartDate)s, %(EndDate)s)',
   {'PatientId': 1, 'StpId': 'STP1', 'StartDate': None, 'EndDate': None}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('RegistrationId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(1,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO practice_registrations ([PatientId], [StpId], [StartDate], '
   '[EndDate]) OUTPUT inserted.[RegistrationId] VALUES (%(PatientId)s, '
   '%(StpId)s, %(StartDate)s, %(EndDate)s)',
   {'PatientId': 2, 'StpId': 'STP1', 'StartDate': None, 'EndDate': None}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('RegistrationId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(2,)]),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('INSERT INTO practice_registrations ([PatientId], [StpId], [StartDate], '
   '[EndDate]) OUTPUT inserted.[RegistrationId] VALUES (%(PatientId)s, '
   '%(StpId)s, %(StartDate)s, %(EndDate)s)',
   {'PatientId': 3, 'StpId': 'STP1', 'StartDate': None, 'EndDate': None}),
  {},
  None),
 ('Cursor', 'rowcount', (), {}, -1),
 ('Cursor',
  'description',
  (),
  {},
  (('RegistrationId', 3, None, None, None, None, None),)),
 ('Cursor', 'fetchall', (), {}, [(3,)]),
 ('Cursor', 'close', (), {}, None),
 ('Connection', 'commit', (), {}, None),
 ('Connection', 'rollback', (), {}, None),
 ('Cursor', 'execute', ('select @@version', {}), {}, None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor',
  'fetchone',
  (),
  {},
  ('Microsoft SQL Server 2017 (RTM-CU24) (KB5001228) - 14.0.3391.2 (X64) \n'
   '\tApr 28 2021 10:32:18 \n'
   '\tCopyright (C) 2017 Microsoft Corporation\n'
   '\tDeveloper Edition (64-bit) on Linux (Ubuntu 16.04.7 LTS)',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor', 'execute', ('SELECT schema_name()', {}), {}, None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, ('dbo',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ('\n'
   '                  SELECT CASE transaction_isolation_level\n'
   '                    WHEN 0 THEN NULL\n'
   "                    WHEN 1 THEN 'READ UNCOMMITTED'\n"
   "                    WHEN 2 THEN 'READ COMMITTED'\n"
   "                    WHEN 3 THEN 'REPEATABLE READ'\n"
   "                    WHEN 4 THEN 'SERIALIZABLE'\n"
   "                    WHEN 5 THEN 'SNAPSHOT' END AS "
   'TRANSACTION_ISOLATION_LEVEL\n'
   '                    FROM sys.dm_exec_sessions\n'
   '                    where session_id = @@SPID\n'
   '                  ',),
  {},
  None),
 ('Cursor', 'fetchone', (), {}, ('READ COMMITTED',)),
 ('Cursor', 'close', (), {}, None),
 ('Cursor',
  'execute',
  ("SELECT CAST('test max support' AS NVARCHAR(max))", {}),
  {},
  None),
 ('Cursor', 'description', (), {}, (('', 1, None, None, None, None, None),)),
 ('Cursor', 'fetchone', (), {}, ('test max support',)),
 ('Cursor', 'close', (), {}, None),
 ('Connection', 'rollback', (), {}, None),
 ('Cursor',
  'execute',
  ('SELECT * INTO group_table_0 FROM (\n'
   'SELECT anon_1.patient_id, anon_1.test_date \n'
   'FROM (SELECT positive_tests.patient_id AS patient_id, '
   'positive_tests.test_date AS test_date, row_number() OVER (PARTITION BY '
   'positive_tests.patient_id ORDER BY positive_tests.test_date) AS _row_num \n'
   'FROM (SELECT PositiveResult AS result, TestDate AS test_date, PatientId AS '
   'patient_id \n'
   'FROM pos_tests) AS positive_tests \n'
   'WHERE positive_tests.result = 1) AS anon_1 \n'
   'WHERE anon_1._row_num = 1\n'
   ') t\n'
   '\n'
   '\n'
   'SELECT * INTO group_table_1 FROM (\n'
   'SELECT anon_1.patient_id, anon_1.test_date \n'
   'FROM (SELECT positive_tests.patient_id AS patient_id, '
   'positive_tests.test_date AS test_date, row_number() OVER (PARTITION BY '
   'positive_tests.patient_id ORDER BY positive_tests.test_date DESC) AS '
   '_row_num \n'
   'FROM (SELECT PositiveResult AS result, TestDate AS test_date, PatientId AS '
   'patient_id \n'
   'FROM pos_tests) AS positive_tests \n'
   'WHERE positive_tests.result = 1) AS anon_1 \n'
   'WHERE anon_1._row_num = 1\n'
   ') t\n'
   '\n'
   '\n'
   'SELECT * INTO group_table_2 FROM (\n'
   'SELECT anon_1.date, anon_1.patient_id, anon_1.result \n'
   'FROM (SELECT clinical_events.date AS date, clinical_events.patient_id AS '
   'patient_id, clinical_events.result AS result, row_number() OVER (PARTITION '
   'BY clinical_events.patient_id ORDER BY clinical_events.date DESC) AS '
   '_row_num \n'
   'FROM (SELECT EventCode AS code, Date AS date, ResultValue AS result, '
   'PatientId AS patient_id \n'
   'FROM events) AS clinical_events LEFT OUTER JOIN group_table_0 ON '
   'group_table_0.patient_id = clinical_events.patient_id LEFT OUTER JOIN '
   'group_table_1 ON group_table_1.patient_id = clinical_events.patient_id \n'
   "WHERE clinical_events.code = N'Code1' AND clinical_events.date >= "
   'group_table_0.test_date AND clinical_events.date <= '
   'group_table_1.test_date) AS anon_1 \n'
   'WHERE anon_1._row_num = 1\n'
   ') t\n'
   '\n'
   '\n'
   'SELECT * INTO group_table_3 FROM (\n'
   'SELECT practice_registrations.patient_id, 1 AS patient_id_exists \n'
   'FROM (SELECT PatientId AS patient_id, StpId AS stp, StartDate AS '
   'date_start, EndDate AS date_end \n'
   'FROM practice_registrations) AS practice_registrations GROUP BY '
   'practice_registrations.patient_id\n'
   ') t\n'
   '\n'
   '\n'
   'SELECT group_table_3.patient_id AS patient_id, group_table_0.test_date AS '
   'first_pos, group_table_1.test_date AS last_pos, group_table_2.date AS '
   'date, group_table_2.result AS value \n'
   'FROM group_table_3 LEFT OUTER JOIN group_table_0 ON '
   'group_table_3.patient_id = group_table_0.patient_id LEFT OUTER JOIN '
   'group_table_1 ON group_table_3.patient_id = group_table_1.patient_id LEFT '
   'OUTER JOIN group_table_2 ON group_table_3.patient_id = '
   'group_table_2.patient_id \n'
   'WHERE group_table_3.patient_id_exists = 1',
   {}),
  {},
  None),
 ('Cursor',
  'description',
  (),
  {},
  (('patient_id', 3, None, None, None, None, None),
   ('first_pos', 2, None, None, None, None, None),
   ('last_pos', 2, None, None, None, None, None),
   ('date', 2, None, None, None, None, None),
   ('value', 3, None, None, None, None, None))),
 ('Cursor',
  'fetchone',
  (),
  {},
  (1,
   datetime.date(2021, 1, 1),
   datetime.date(2021, 3, 2),
   datetime.date(2021, 3, 1),
   10.3)),
 ('Cursor',
  'fetchone',
  (),
  {},
  (2,
   datetime.date(2021, 1, 21),
   datetime.date(2021, 5, 1),
   datetime.date(2021, 2, 1),
   50.2)),
 ('Cursor',
  'fetchone',
  (),
  {},
  (3, datetime.date(2021, 1, 10), datetime.date(2021, 3, 1), None, None)),
 ('Cursor', 'fetchone', (), {}, None),
 ('Cursor', 'close', (), {}, None),
 ('Connection', 'rollback', (), {}, None)]
